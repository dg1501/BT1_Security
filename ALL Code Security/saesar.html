<!DOCTYPE html>
<html lang="vi">
  <head>
    <meta charset="utf-8" />
    <title>Caesar Cipher — Simple</title>
    <style>
      body {
        font-family: Arial, Helvetica, sans-serif;
        max-width: 760px;
        margin: 28px auto;
        padding: 12px;
      }
      label {
        display: block;
        margin: 12px 0 6px;
        font-weight: 600;
      }
      textarea {
        width: 100%;
        height: 120px;
        padding: 8px;
        box-sizing: border-box;
        font-family: monospace;
      }
      input[type="number"] {
        width: 120px;
        padding: 6px;
      }
      button {
        margin: 8px 6px 8px 0;
        padding: 8px 12px;
        cursor: pointer;
      }
      pre {
        background: #f7f9fb;
        border: 1px solid #e1e6ea;
        padding: 10px;
        white-space: pre-wrap;
      }
    </style>
  </head>
  <body>
    <h2>Caesar Cipher — Simple</h2>

    <label for="txt">Nhập Plaintext / Ciphertext</label>
    <textarea id="txt">Hello World</textarea>

    <label for="key">Khóa (0 - 25)</label>
    <input id="key" type="number" value="3" min="0" max="25" />

    <div>
      <button onclick="encrypt()">Encrypt</button>
      <button onclick="decrypt()">Decrypt</button>
      <button onclick="clearOut()">Clear</button>
    </div>

    <label>Kết quả</label>
    <pre id="out"></pre>

    <script>
      function mod(n, m) {
        return ((n % m) + m) % m;
      }

      function shiftChar(ch, k) {
        const code = ch.charCodeAt(0);
        if (code >= 65 && code <= 90)
          return String.fromCharCode(65 + mod(code - 65 + k, 26));
        if (code >= 97 && code <= 122)
          return String.fromCharCode(97 + mod(code - 97 + k, 26));
        return ch;
      }

      function caesar(text, k) {
        k = mod(k, 26);
        let r = "";
        for (let i = 0; i < text.length; i++) r += shiftChar(text[i], k);
        return r;
      }

      function getKey() {
        let k = parseInt(document.getElementById("key").value, 10);
        return Number.isNaN(k) ? 0 : mod(k, 26);
      }

      function encrypt() {
        const t = document.getElementById("txt").value;
        document.getElementById("out").textContent = caesar(t, getKey());
      }

      function decrypt() {
        const t = document.getElementById("txt").value;
        document.getElementById("out").textContent = caesar(t, 26 - getKey());
      }

      function clearOut() {
        document.getElementById("out").textContent = "";
      }
    </script>
  </body>
</html>
